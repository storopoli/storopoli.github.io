<!DOCTYPE html>
<html>
  <head id="head">
    <meta charset="UTF-8">
    <meta name="description" content="Jose Storopoli, PhD - personal website">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@storopoli">
    <meta name="twitter:author" content="@storopoli">
    <meta name="twitter:description" content="Jose Storopoli, PhD - personal website">
    <meta name="twitter:title" content="htmx: an Oasis in a Desert of Soy | @stropoli">
    <meta name="twitter:image" content="https://storopoli.io/pp.jpg">
    <meta property="og:type" content="website">
    <meta property="og:title" content="htmx: an Oasis in a Desert of Soy | @storopoli">
    <meta property="og:image" content="https://storopoli.io/pp.jpg">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title id="title">
      htmx: an Oasis in a Desert of Soy
      - @storopoli
    </title>
    <link rel="stylesheet" type="text/css" href="/main.css">
    <link rel="stylesheet" type="text/css" href="/fonts.css">
    <link rel="stylesheet" type="text/css" href="/fira_code.css">
    <link rel="stylesheet" type="text/css" href="/highlight.css">
    <link type="text/css" rel="stylesheet" href="/term-highlight.css">
    
  </head>
  <body>
    <div id="content">
      <style>
        h1,
        h2,
        h3 {
          text-align: center;
        }

        .profile-pic {
          border-radius: 50%;
          border: 5px solid lightblue;
          margin-top: 1rem;
        }
      </style>
      <div style="display:flex; flex-direction:column; align-items:center;">
        <h1 id="header" class="noupper" style="margin-bottom:0;">
          Jose Storopoli, PhD
        </h1>
        <div class="menu" style="display:flex; justify-content:center; ">
          <a href="/">Home</a>
          •
          <a href="/blog/">Blog</a>
          •
          <a href="https://github.com/storopoli" target="_blank">
            GitHub
          </a>
          •
          <a href="/publickey.txt" target="_blank">
            PGP
          </a>
          •
          <a href="/index.xml" rel="alternate" type="application/rss+xml">
            RSS
          </a>
        </div>
      </div>
      
  <h1>htmx: an Oasis in a Desert of Soy</h1>
  <p class="post-byline">
    <span>January 14, 2024</span>
    •
    <span>7</span>
    min read • by
    <b>Jose Storopoli, PhD</b>
    <span></span>
  </p>
  <div id="post-description"></div>
  <div>
    <div class="toc block info">
      <h1>&nbsp;Table of Contents</h1>
      <div><ul>
<li>
<ul><li>
What is <code>htmx</code>?</li><li>Hypermedia</li><li><code>htmx</code> in Practice<ul><li>
How we would do this in React?</li></ul></li><li>Conclusion</li></ul></ul></div>
    </div>
  </div>
  <div></div>
  <div id="content">
    <div id="post-body"><p><figure><img src="/blog/2024-01-14-htmx/bellcurve.png" alt="">
<figcaption>htmx bell curve</figcaption></figure></p><p>I love to learn new things and I’m passionate about Stoic philosophy. So, when I acquired the domain <a href="https://stoicquotes.io" target="_blank"><code>stoicquotes.io</code></a>, I’ve decided to give <a href="https://htmx.org" target="_blank"><code>htmx</code></a> a try.</p><h2>What is <code>htmx</code>?</h2><p><strong><code>htmx</code></strong> is a small JavaScript library that allows you to enhance your HTML with attributes to perform AJAX (Asynchronous JavaScript and XML) without writing JavaScript. It focuses on extending HTML by adding custom attributes that describe how to perform common dynamic web page behaviors like partial page updates, form submission, etc. <code>htmx</code> is designed to be easy to use, requiring minimal JavaScript knowledge, so that you can add interactivity to web pages with just HTML.</p><p>Let’s contrast this with the <a href="/blog/2023-11-10-2023-11-13-soydev/">Soy stuff</a> like the notorious React framework. <strong>React</strong>, on the other hand, is a JavaScript library for building user interfaces, primarily through a component-based architecture. It manages the creation of user interface elements, updates the UI efficiently when data changes, and helps keep your UI in sync with the state of your application. React requires a deeper knowledge of JavaScript and understanding of its principles, such as components, state, and props.</p><p><strong>In simple terms:</strong></p><ul><li><strong><code>htmx</code></strong> enhances plain HTML by letting you add attributes for dynamic behaviors, so you can make webpages interactive with no JavaScript coding; you can think of it as boosting your HTML to do more.</li><li><strong>React</strong> is more like building a complex machine from customizable parts that you program with JavaScript, giving you full control over how your application looks and behaves but also requiring more from you in terms of code complexity and architecture.</li></ul><p>Additionally, React can be slower and less performant than <code>htmx</code>. This is due to <code>htmx</code> manipulating the actual <a href="https://en.wikipedia.org/wiki/Document_Object_Model" target="_blank">DOM</a> itself, while React updates objects in the Virtual DOM. Afterward, React compares the new Virtual DOM with a pre-update version and calculates the most efficient way to make these changes to the real DOM. So React has to do this whole trip around diff’ing all the time the Virtual DOM against the actual DOM for <strong>every fucking change</strong>.</p><p>Finally, <code>htmx</code> receives pure HTML from the server. React needs to the <strong>JSON busboy thing</strong>: the server sends JSON, React parses JSON into JavaScript code, then it parses it again to HTML for the browser.</p><p>A consequence of these different paradigms is that <code>htmx</code> don’t care about what the server sends back and will happily include in the DOM. Hence, front-end and back-end are decoupled and less complex. Whereas in Reactland, we need to have a tight synchronicity between front-end and back-end. If the JSON that the server sends doesn’t conform to the exact specifications of the front-end, the application <del>becomes a dumpster fire</del> breaks.</p><h2>Hypermedia</h2><p>When the web was created it was based on the concept of <a href="https://en.wikipedia.org/wiki/Hypermedia" target="_blank"><strong>Hypermedia</strong></a>. Hypermedia refers to a system of interconnected multimedia elements, which can include text, graphics, audio, video, and hyperlinks. It allows users to navigate between related pieces of content across the web or within applications, creating a non-linear way of accessing information.</p><p>HTML follows the Hypermedia protocol. HTML is the native language of browsers. That’s why all the React-like frameworks have to convert JavaScript into HTML. So it’s only natural to rely primarily on HTML to deliver content and sprinkle JavaScript sparingly when you need something that HTML cannot offer.</p><p>Unfortunately, HTML has stopped in time. Despite all the richness of <a href="https://en.wikipedia.org/wiki/HTTP" target="_blank">HTTP</a> with the diverse request methods: <code>GET</code>, <code>HEAD</code>, <code>POST</code>, <code>PUT</code>, <code>DELETE</code>, <code>CONNECT</code>, <code>OPTIONS</code>, <code>TRACE</code>, <code>PATCH</code>; HTML only has <em>two</em> elements that interact with the server:</p><ul><li><code>&lt;a&gt;</code>: sends a <code>GET</code> request to fetch new data.</li><li><code>&lt;form&gt;</code>: sends a <code>POST</code> request to create new data.</li></ul><p>That’s the main purpose of <code>htmx</code>: allowing HTML elements to leverage all the capabilities of HTTP.</p><h2><code>htmx</code> in Practice</h2><p>OK, enough of abstract and theoretical concepts. Let’s see how <code>htmx</code> works in practice.</p><p>First, the only thing you need to do enable <code>htmx</code> is to insert this <code>&lt;script&gt;</code> tag in your HTML:</p><pre><code class="html"><span class="punctuation bracket">&lt;</span><span class="tag">script</span> <span class="attribute">src</span>=&quot;<span class="string">https://unpkg.com/htmx.org@{version}</span>&quot;<span class="punctuation bracket">&gt;</span><span class="punctuation bracket">&lt;/</span><span class="tag">script</span><span class="punctuation bracket">&gt;</span>
</code></pre>
<p>where <code>{version}</code> is the desired <code>htmx</code> version that you’ll want to use. I has around 40kb of size.</p><p>Inside the code behind <a href="https://stoicquotes.io" target="_blank"><code>stoicquotes.io</code></a>, we have the following HTML:</p><pre><code class="html"><span class="punctuation bracket">&lt;</span><span class="tag">div</span><span class="punctuation bracket">&gt;</span>
  <span class="punctuation bracket">&lt;</span><span class="tag">blockquote</span> <span class="attribute">id</span>=&quot;<span class="string">quote</span>&quot;<span class="punctuation bracket">&gt;</span>Some nice Stoic quote...<span class="punctuation bracket">&lt;/</span><span class="tag">blockquote</span><span class="punctuation bracket">&gt;</span>
<span class="punctuation bracket">&lt;/</span><span class="tag">div</span><span class="punctuation bracket">&gt;</span>
<span class="punctuation bracket">&lt;</span><span class="tag">button</span>
  <span class="attribute">hx-get</span>=&quot;<span class="string">/quote</span>&quot;
  <span class="attribute">hx-trigger</span>=&quot;<span class="string">click</span>&quot;
  <span class="attribute">hx-target</span>=&quot;<span class="string">#quote</span>&quot;
  <span class="attribute">hx-swap</span>=&quot;<span class="string">outerHTML</span>&quot;
<span class="punctuation bracket">&gt;</span>
  New
<span class="punctuation bracket">&lt;/</span><span class="tag">button</span><span class="punctuation bracket">&gt;</span>
</code></pre>
<p>When the user clicks (<code>hx-trigger</code>) in the “New” button, <code>htmx</code> sends a <code>GET</code> request to the <code>/quote</code> endpoint (<code>hx-get</code>). Then it swaps the whole HTML (<code>hx-swap</code>) of the element that has id “quote” (<code>hx-target</code>). This is accomplished without a single character of JavaScript. Instead we extend HTML by adding new attributes to the HTML elements:</p><ul><li><code>hx-get</code></li><li><code>hx-trigger</code></li><li><code>hx-target</code></li><li><code>hx-swap</code></li></ul><p>The server replies with a new <code>&lt;blockquote&gt;</code> element every time it gets a <code>GET</code> request in the <code>/quote</code> endpoint.</p><p>This is truly amazing. We just used one line of <code>htmx</code>.</p><p><figure><img src="/blog/2024-01-14-htmx/4-lines.png" alt="">
<figcaption>htmx 4 lines</figcaption></figure></p><p><code>htmx</code> adheres to my trifecta of amazing tools:</p><ul><li>powerful</li><li>expressive</li><li>concise</li></ul><p>Here’s a breakdown of what the trifecta of amazing tools means:</p><ol><li><p><strong>Powerful:</strong> A powerful tool has the capability to handle complex, demanding tasks with relative ease. It possesses the strength, performance, and features necessary to accomplish a wide range of functions.</p></li><li><p><strong>Expressive:</strong> An expressive tool gives users the ability to articulate complex ideas, designs, or concepts with simplicity and nuance. It provides a rich set of capabilities that allow for diverse and sophisticated forms of expression.</p></li><li><p><strong>Concise:</strong> A concise tool allows for achieving goals with minimal effort or complexity. It focuses on efficiency and effectiveness, often through simplification and the removal of unnecessary components. It should be capable of performing tasks without requiring verbose instructions or processes.</p></li></ol><h3>How we would do this in React?</h3><p>Now compare this with React.</p><p>First, we need to install React. This is not simple, but here’s a breakdown:</p><ol><li><p>install Node.js</p></li><li><p>install React: <code>npm install react react-dom</code></p></li><li><p>create an <code>index.js</code> file with some variant of:</p><pre><code class="javascript"><span class="keyword">import</span> <span class="punctuation bracket">{</span> <span class="variable">createRoot</span> <span class="punctuation bracket">}</span> <span class="keyword">from</span> <span class="string">&quot;react-dom/client&quot;</span><span class="punctuation delimiter">;</span>

<span class="variable">document</span><span class="punctuation delimiter">.</span><span class="property">body</span><span class="punctuation delimiter">.</span><span class="property">innerHTML</span> <span class="operator">=</span> <span class="string">&apos;&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;&apos;</span><span class="punctuation delimiter">;</span>

<span class="keyword">const</span> <span class="variable">root</span> <span class="operator">=</span> <span class="function">createRoot</span><span class="punctuation bracket">(</span><span class="variable">document</span><span class="punctuation delimiter">.</span><span class="function method">getElementById</span><span class="punctuation bracket">(</span><span class="string">&quot;app&quot;</span><span class="punctuation bracket">)</span><span class="punctuation bracket">)</span><span class="punctuation delimiter">;</span>
<span class="variable">root</span><span class="punctuation delimiter">.</span><span class="function method">render</span><span class="punctuation bracket">(</span><span class="operator">&lt;</span><span class="variable">h1</span><span class="operator">&gt;</span>Hello, world&lt;/<span class="variable">h1</span><span class="operator">&gt;</span><span class="punctuation bracket">)</span><span class="punctuation delimiter">;</span>
</code></pre>
</li></ol><p>And now here’s the code for the <code>Quote</code> component:</p><pre><code class="javascript"><span class="keyword">import</span> <span class="variable">React</span><span class="punctuation delimiter">,</span> <span class="punctuation bracket">{</span> <span class="variable">useState</span> <span class="punctuation bracket">}</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span><span class="punctuation delimiter">;</span>

<span class="keyword">const</span> <span class="variable">Quote</span> <span class="operator">=</span> <span class="punctuation bracket">(</span><span class="punctuation bracket">)</span> <span class="operator">=&gt;</span> <span class="punctuation bracket">{</span>
  <span class="keyword">const</span> <span class="punctuation bracket">[</span><span class="variable">quote</span><span class="punctuation delimiter">,</span> <span class="variable">setQuote</span><span class="punctuation bracket">]</span> <span class="operator">=</span> <span class="function">useState</span><span class="punctuation bracket">(</span><span class="string">&quot;Some nice Stoic quote...&quot;</span><span class="punctuation bracket">)</span><span class="punctuation delimiter">;</span>

  <span class="keyword">const</span> <span class="variable">fetchNewQuote</span> <span class="operator">=</span> <span class="keyword">async</span> <span class="punctuation bracket">(</span><span class="punctuation bracket">)</span> <span class="operator">=&gt;</span> <span class="punctuation bracket">{</span>
    <span class="keyword">try</span> <span class="punctuation bracket">{</span>
      <span class="keyword">const</span> <span class="variable">response</span> <span class="operator">=</span> <span class="keyword">await</span> <span class="function">fetch</span><span class="punctuation bracket">(</span><span class="string">&quot;/quote&quot;</span><span class="punctuation bracket">)</span><span class="punctuation delimiter">;</span>
      <span class="keyword">const</span> <span class="variable">newQuote</span> <span class="operator">=</span> <span class="keyword">await</span> <span class="variable">response</span><span class="punctuation delimiter">.</span><span class="function method">text</span><span class="punctuation bracket">(</span><span class="punctuation bracket">)</span><span class="punctuation delimiter">;</span>
      <span class="function">setQuote</span><span class="punctuation bracket">(</span><span class="variable">newQuote</span><span class="punctuation bracket">)</span><span class="punctuation delimiter">;</span>
    <span class="punctuation bracket">}</span> <span class="keyword">catch</span> <span class="punctuation bracket">(</span><span class="variable">error</span><span class="punctuation bracket">)</span> <span class="punctuation bracket">{</span>
      <span class="variable">console</span><span class="punctuation delimiter">.</span><span class="function method">error</span><span class="punctuation bracket">(</span><span class="string">&quot;Error fetching new quote:&quot;</span><span class="punctuation delimiter">,</span> <span class="variable">error</span><span class="punctuation bracket">)</span><span class="punctuation delimiter">;</span>
    <span class="punctuation bracket">}</span>
  <span class="punctuation bracket">}</span><span class="punctuation delimiter">;</span>

  <span class="keyword">return</span> <span class="punctuation bracket">(</span>
    <span class="operator">&lt;</span><span class="variable">div</span><span class="operator">&gt;</span>
      <span class="operator">&lt;</span><span class="variable">blockquote</span> <span class="property">id</span><span class="operator">=</span><span class="string">&quot;quote&quot;</span><span class="operator">&gt;</span><span class="punctuation bracket">{</span><span class="variable">quote</span><span class="punctuation bracket">}</span>&lt;/<span class="variable">blockquote</span><span class="operator">&gt;</span>
      <span class="operator">&lt;</span><span class="variable">button</span> <span class="property">onClick</span><span class="operator">=</span><span class="punctuation bracket">{</span><span class="variable">fetchNewQuote</span><span class="punctuation bracket">}</span><span class="operator">&gt;</span>New&lt;/<span class="variable">button</span><span class="operator">&gt;</span>
    &lt;/<span class="variable">div</span><span class="operator">&gt;</span>
  <span class="punctuation bracket">)</span><span class="punctuation delimiter">;</span>
<span class="punctuation bracket">}</span><span class="punctuation delimiter">;</span>

<span class="keyword">export</span> <span class="keyword">default</span> <span class="variable">Quote</span><span class="punctuation delimiter">;</span>
</code></pre>
<p>That’s a LOT of JavaScript code. The Soy Gods must be smiling upon you, my friend.</p><h2>Conclusion</h2><p>I highly recommend that you check out <a href="https://htmx.org" target="_blank"><code>htmx</code></a>, especially the free <a href="https://htmx.org/#book" target="_blank">Hypermedia systems book</a> which goes into details and it is way more comprehensive than this short blog post.</p><p><code>htmx</code> is a fresh and elegant approach to build simple reactive web pages. It extends HTML to be able to use all of the capabilities of any JavaScript-based reactive framework without a single drop of JavaScript. You just add some new HTML attributes to your HTML elements.</p><p>I’ve had such joy using <code>htmx</code> lately. It made me go back into my early teens, when I was doing HTML pages in <a href="https://en.wikipedia.org/wiki/GeoCities" target="_blank">GeoCities</a>. Good times, no JavaScript-bloated code.</p></div>
  </div>
  <hr>
  <div id="prev-next">
    <span>
      <a href="/blog/2023-11-28-zero_cost_abstractions/">←
        <span>Zero-cost Abstractions</span></a>
    </span>
    <span>&nbsp; • &nbsp;</span>
    <span>
      <a href="/blog/2024-01-30-sudoku/"><span>Fullstack and Progressive Web Apps in Rust: A Tale of a Sudoku Spyware</span>
        →</a>
    </span>
    <small>&nbsp; or &nbsp;</small>
    <small>
      <a href="/">Back to the Homepage</a>
    </small>
  </div>

    </div>
    <footer id="footer">
      <small class="noupper" style="color:#606060;font-weight:normal;">
        <a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank">
          CC-BY-SA 4.0
        </a>
        &nbsp;
        —
        &nbsp;
        <a href="https://github.com/storopoli" target="_blank">
          Jose Storopoli, PhD
        </a>
        &nbsp;
        —
        &nbsp;
        <i>made with &nbsp;
          <a href="https://zine-ssg.io" target="_blank">
            <img src="/zig-logo-light.svg" height="13">
          </a></i>
      </small>
      
    </footer>
  </body>
</html>
